# Remote File

Only HTTPS protocol is supported.

**Note:** By default, Node.js doesn't respect OS proxy settings. It's recommended to use
[global-proxy](https://devdiv.visualstudio.com/DefaultCollection/NodeRepos/_git/global-proxy)
package which can read OS proxy settings and alter Node.js HTTP/HTTPS request functions.

## Install NPM Dependencies

```
npm run install-all
```

## Test

```
npm test
```

## Remote File API

```typescript
function downloadFile(fileUrl: string, ttl?: number): Promise<Buffer>;

/**
 * Creates a subscription for a remote file update event.
 *
 * @param fileUrl the file URL which will be monitored.
 * @param onUpdate the function will be called when the given file is updated and subscription is enabled.
 */
function createFileUpdateSubscription(
    fileUrl: string,
    onUpdate: (buffer: Buffer) => void,
    ttl?: number):
    LazyDisposable<void>;
```

## Examples

### Download A Remote File.
```typescript
let bufferPromise = downloadFile("https://example.com/", 90 * 60 * 1000);
```

### Subscribe On A Remote File Update

```typescript
createOnFileUpdateSubscription("https://example.com/", buffer => console.log(buffer.toString()), 30 * 60 * 1000)
    .using(() = {

        // user's code here

    });
```

### Subscribe On A Remote File Update (Dispose Style, not safe)

**Note: Don't forget to call dispose() function.**

```typescript
let subscription = createFileUpdateSubscription("https://example.com/", buffer => console.log(buffer.toString()))
    .init();

// user's code here

// don't forget to call the dispose() method.
subscriptionDispose.dispose();
```

## Production Dependency

- string@3.3.1
    - license: MIT
    - [LCA request](https://osstool.microsoft.com/palamida/RequestDetails.htm?rid=39871&projectId=1&from=requests)
    - [IP Scan is in progress](https://microsoft.sharepoint.com/teams/DD_VSPlat/Telemetry/_layouts/15/guestaccess.aspx?guestaccesstoken=brji79XMvW58C9oRQ%2beGCtbBSMUVog%2f3gJ2WPbJ8KY4%3d&docid=2_142f3e81adee24f0db5e8a226749876f4)

## Development Dependencies

- nock ^7.5.0
    - license MIT
    - [LCA request](https://osstool.microsoft.com/palamida/RequestDetails.htm?rid=38115&projectId=1&from=requests)
- chai ^3.5.0
    - license: MIT
    - [LCA request](https://osstool.microsoft.com/palamida/RequestDetails.htm?rid=36127&projectId=1&from=requests)
- mocha ^2.4.5
    - license: MIT
    - [LCA request](https://osstool.microsoft.com/palamida/RequestDetails.htm?rid=36126&projectId=1&from=requests)
- sinon ^1.17.3
    - license: BSD-3-Clause
    - [LCA request](https://osstool.microsoft.com/palamida/RequestDetails.htm?rid=36134&projectId=1&from=requests)
