"use strict";

var SystemColorsModule = require(".");

var colorsWatcher = new SystemColorsModule.SystemColors();
function logHighContrastState() {
    console.log("HighContrast is " + (colorsWatcher.isHighContrastEnabled() ? "on" : "off"));    
}
function logSystemColors() {
    console.log(colorsWatcher.getSystemColors());    
}

// Log initial state
logHighContrastState();
logSystemColors();

// Watch for changes
colorsWatcher.on("change", () => {
    logHighContrastState();
    logSystemColors();
});

// Shutdown nodejs to kill the watcher
setTimeout(process.exit.bind(this, 0), 10000);
