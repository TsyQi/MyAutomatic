/*---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
"use strict";
var stringjs = require("string");
var VersionPropertyProvider = (function () {
    function VersionPropertyProvider() {
    }
    /**
     * Add shared properties to the provided context.
     * @param context Context to add shared property
     */
    VersionPropertyProvider.prototype.addSharedProperties = function (context) {
        var version = "nodejs@" + VersionPropertyProvider.telemetryApiVersion;
        context.setSharedProperty("VS.Core.TelemetryApi.ProductVersion", version);
        return Promise.resolve(null);
    };
    /**
     * Posts properties to the provided context.
     * @param context Context to post property
     */
    VersionPropertyProvider.prototype.postProperties = function (context) {
        var version = process.version;
        if (stringjs(version).startsWith("v")) {
            version = version.substr(1);
        }
        context.postProperty("VS.Core.Nodejs.Version", version);
        return Promise.resolve(null);
    };
    // This token is replaced at compile-time by the tools/version-inliner.js script.
    VersionPropertyProvider.telemetryApiVersion = "0.3.2";
    return VersionPropertyProvider;
}());
exports.VersionPropertyProvider = VersionPropertyProvider;
